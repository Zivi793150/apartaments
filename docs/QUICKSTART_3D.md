# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: 3D –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–¥–∞–Ω–∏—è –ò—Å–ø–∞–Ω–∏–∏ (Mapbox)

## –ó–∞ 5 –º–∏–Ω—É—Ç –æ—Ç –Ω—É–ª—è –¥–æ —Ä–∞–±–æ—á–µ–π 3D —Å—Ü–µ–Ω—ã

### –®–∞–≥ 1Ô∏è‚É£: –ü–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π Mapbox —Ç–æ–∫–µ–Ω (2 –º–∏–Ω)

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://www.mapbox.com/
2. –ù–∞–∂–º–∏—Ç–µ **Sign up** (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–µ—Å–ø–ª–∞—Ç–Ω–∞)
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–æ—á—Ç—É
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Account ‚Üí **Tokens**
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Public token** (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `pk.eyJ...`)

### –®–∞–≥ 2Ô∏è‚É£: –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç (1 –º–∏–Ω)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (`c:\Users\zivi7\apartaments\.env.local`):

```env
NEXT_PUBLIC_MAPBOX_TOKEN=pk.eyJ1Ijoi_YOUR_TOKEN_HERE_...
```

–ó–∞–º–µ–Ω–∏—Ç–µ `_YOUR_TOKEN_HERE_` –Ω–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω.

### –®–∞–≥ 3Ô∏è‚É£: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç (2 –º–∏–Ω)

```bash
cd c:\Users\zivi7\apartaments
npm run dev
```

### –®–∞–≥ 4Ô∏è‚É£: –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/spain-building

**–ì–æ—Ç–æ–≤–æ! ‚úÖ**

---

## üé¨ –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ

![–û–ø–∏—Å–∞–Ω–∏–µ]
- üó∫Ô∏è –ö–∞—Ä—Ç–∞ –ò—Å–ø–∞–Ω–∏–∏ (–ê–ª–≥–∞—Ä—Ä–æ–±–æ) –≤ —Ü–µ–Ω—Ç—Ä–µ —ç–∫—Ä–∞–Ω–∞
- üè¢ 3D –∑–¥–∞–Ω–∏–µ —Å 6 —ç—Ç–∞–∂–∞–º–∏ –∏ 24 –∫–≤–∞—Ä—Ç–∏—Ä–∞–º–∏
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ 360¬∞
- üé® –¶–≤–µ—Ç–æ–≤–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä:
  - üü¢ –ó–µ–ª—ë–Ω—ã–µ = –°–≤–æ–±–æ–¥–Ω—ã–µ
  - üü° –ñ—ë–ª—Ç—ã–µ = –ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
  - ‚ö´ –°–µ—Ä—ã–µ = –ü—Ä–æ–¥–∞–Ω–Ω—ã–µ
- üìä –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–µ–≤–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- üí° –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏

---

## üïπÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

| –î–µ–π—Å—Ç–≤–∏–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|-----------|
| **–ù–∞–≤–µ–¥–µ–Ω–∏–µ –º—ã—à–∏** –Ω–∞ –∫–≤–∞—Ä—Ç–∏—Ä—É | –í—ã–¥–µ–ª–µ–Ω–∏–µ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è |
| **–ö–ª–∏–∫** –Ω–∞ –∫–≤–∞—Ä—Ç–∏—Ä—É | –û—Ç–∫—Ä—ã—Ç—å –ø–æ–ª–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ |
| **–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ** –º—ã—à—å—é | –†—É—á–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã |
| **–°–∫—Ä–æ–ª–ª** –º—ã—à—å—é | –ü—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ |
| **–ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ + –¥–≤–∏–∂–µ–Ω–∏–µ** | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —É–≥–ª–∞ –Ω–∞–∫–ª–æ–Ω–∞ |
| **–ö–Ω–æ–ø–∫–∞ üîÑ –í—Ä–∞—â–µ–Ω–∏–µ** | –í–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–ø–æ–≤–æ—Ä–æ—Ç |

---

## üîß –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚ùå –û—à–∏–±–∫–∞: "Cannot find module 'react'"
**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
```bash
Ctrl+C  # –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å npm
npm run dev  # –∑–∞–Ω–æ–≤–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å
```

### ‚ùå –û—à–∏–±–∫–∞: "Cannot find MAPBOX_TOKEN"
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
1. –§–∞–π–ª `.env.local` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –¢–æ–∫–µ–Ω —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤
3. –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è .env.local

### ‚ùå –ö–∞—Ä—Ç–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è (–±–µ–ª—ã–π —ç–∫—Ä–∞–Ω)
**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Console**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–π

### ‚ùå –ö–≤–∞—Ä—Ç–∏—Ä—ã –Ω–µ –≤–∏–¥–Ω—ã –Ω–∞ –∑–¥–∞–Ω–∏–∏
**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑-–∑–∞ –º–∞—Å—à—Ç–∞–±–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:
1. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å –∫–∞—Ä—Ç—É
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–æ–ª–ª –¥–ª—è –∑—É–º–∞
3. –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+Delete)

---

## üìç –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–¥–∞–Ω–∏—è

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã **–ê–ª–≥–∞—Ä—Ä–æ–±–æ, –ò—Å–ø–∞–Ω–∏—è** (36.7696, -4.0387).

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π –∞–¥—Ä–µ—Å, –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env.local`:

```env
NEXT_PUBLIC_BUILDING_LAT=40.4168    # –î–ª—è –ú–∞–¥—Ä–∏–¥–∞
NEXT_PUBLIC_BUILDING_LNG=-3.7038
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:
https://www.gps-coordinates.net/

–ü—Ä–∏–º–µ—Ä—ã –¥—Ä—É–≥–∏—Ö –≥–æ—Ä–æ–¥–æ–≤:
- **–ë–∞—Ä—Å–µ–ª–æ–Ω–∞:** LAT=41.3851, LNG=2.1734
- **–°–µ–≤–∏–ª—å—è:** LAT=37.3891, LNG=-5.9845
- **–í–∞–ª–µ–Ω—Å–∏—è:** LAT=39.4699, LNG=-0.3763

---

## üé® –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ components/scene/
‚îÇ   ‚îî‚îÄ‚îÄ SpainBuilding3D.tsx         ‚Üê –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îú‚îÄ‚îÄ app/spain-building/
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                     ‚Üê –°–µ—Ä–≤–µ—Ä–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ client.tsx                   ‚Üê –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π UI
‚îÇ   ‚îî‚îÄ‚îÄ layout.tsx                   ‚Üê Layout

docs/
‚îú‚îÄ‚îÄ MAPBOX_3D_SETUP.md               ‚Üê –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ MAPBOX_3D_READY.md               ‚Üê –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ SPAIN_3D_BUILDING_VISUALIZATION.md ‚Üê –ê–Ω–∞–ª–∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
```

---

## üíæ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–≤–æ–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```tsx
import SpainBuilding3D from "@/components/scene/SpainBuilding3D";

export default function MyPage() {
  return (
    <SpainBuilding3D
      onPick={(apt) => console.log("–í—ã–±—Ä–∞–Ω–∞:", apt?.id)}
    />
  );
}
```

### –° —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:
```tsx
import { useState } from "react";
import SpainBuilding3D from "@/components/scene/SpainBuilding3D";

export default function MyPage() {
  const [filter, setFilter] = useState({ rooms: null });

  return (
    <>
      <button onClick={() => setFilter({ rooms: 2 })}>
        –¢–æ–ª—å–∫–æ 2-–∫–æ–º–Ω–∞—Ç–Ω—ã–µ
      </button>
      <SpainBuilding3D filter={filter} />
    </>
  );
}
```

---

## üåê –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω

–ö–æ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã –≤—ã–ª–æ–∂–∏—Ç—å –Ω–∞ –±–æ–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä:

### Vercel (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è Next.js):
```bash
npm install -g vercel
vercel
```

### –õ—é–±–æ–π Node.js —Ö–æ—Å—Ç–∏–Ω–≥:
```bash
npm run build
npm run start
```

**–ù–µ –∑–∞–±—É–¥—å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä!**

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–†–∞–∑–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞** | 640 —Å—Ç—Ä–æ–∫ |
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** | 5 (React, Mapbox, Framer Motion, Lucide) |
| **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã** | Chrome, Firefox, Safari, Edge (–≤—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ) |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | 60 FPS –Ω–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ |
| **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏** | ~2-3 —Å–µ–∫ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞) |

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –û–ø—Ü–∏—è 1: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–ó–∞–º–µ–Ω–∏—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–≤–∞—Ä—Ç–∏—Ä –Ω–∞ –∑–∞–ø—Ä–æ—Å –∫ –≤–∞—à–µ–π –ë–î:
```tsx
// –í–º–µ—Å—Ç–æ generateApartmentData()
const apartments = await fetch('/api/apartments').then(r => r.json());
```

### –û–ø—Ü–∏—è 2: –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π 3D –¥–∏–∑–∞–π–Ω
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Babylon.js –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ GLB –º–æ–¥–µ–ª–µ–π:
```tsx
const model = await BABYLON.SceneLoader.ImportMeshAsync(...);
```

### –û–ø—Ü–∏—è 3: –†–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –î–æ–±–∞–≤–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ç—É—Ä
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Street View
- –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ-–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å —á–∞—Ç –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã:

1. üìñ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `docs/MAPBOX_3D_SETUP.md`
2. üîç –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)
3. üåê –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Mapbox: https://docs.mapbox.com/

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏—è

‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ RealityScan** - –Ω–µ –Ω—É–∂–Ω–æ —Å–Ω–∏–º–∞—Ç—å –∑–¥–∞–Ω–∏–µ  
‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é –≤–µ–±-based** - –Ω–∏–∫–∞–∫–æ–≥–æ –ü–û –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è  
‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** - Mapbox Free tier –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ  
‚úÖ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ** - –≤—ã–¥–µ–ª–µ–Ω–∏–µ, —Ñ–∏–ª—å—Ç—Ä—ã, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è  
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ** - 60 FPS –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ –∑–¥–∞–Ω–∏—è  
‚úÖ **–¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–æ** - TypeScript —Å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º  
‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω—É** - production-ready –∫–æ–¥  

---

**–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å? üöÄ –í—ã–ø–æ–ª–Ω–∏—Ç–µ –®–∞–≥–∏ 1-4 –≤—ã—à–µ!**

–í–æ–ø—Ä–æ—Å—ã? –û—Ç–≤–µ—Ç—ã –≤ `docs/MAPBOX_3D_SETUP.md` üìö
