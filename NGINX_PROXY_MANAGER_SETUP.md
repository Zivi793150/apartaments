# –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ Nginx Proxy Manager

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å Nginx Proxy Manager

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://95.165.75.43:81
```

**–î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∫—Ä–µ–¥—ã (–µ—Å–ª–∏ –Ω–µ –º–µ–Ω—è–ª–∏):**
- Email: `admin@example.com`  
- Password: `changeme`

### 2. –°–æ–∑–¥–∞–π—Ç–µ Proxy Host

1. –í –ª–µ–≤–æ–º –º–µ–Ω—é: **"Hosts"** ‚Üí **"Proxy Hosts"**
2. –ù–∞–∂–º–∏—Ç–µ **"Add Proxy Host"** (–∑–µ–ª–µ–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É)

### 3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É "Details"

- ‚úÖ **Domain Names:** `site.endless-summer.ru`
- ‚úÖ **Scheme:** `http` (–Ω–µ https, —Å–∞–º –ø—Ä–æ–∫—Å–∏ –¥–æ–±–∞–≤–∏—Ç)
- ‚úÖ **Forward Hostname / IP:** `localhost`
- ‚úÖ **Forward Port:** `3000`
- ‚úÖ **Cache Assets:** –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å
- ‚úÖ **Block Common Exploits:** –≤–∫–ª—é—á–∏—Ç–µ
- ‚úÖ **Websockets Support:** **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤–∫–ª—é—á–∏—Ç–µ!** (–≤–∞–∂–Ω–æ –¥–ª—è Next.js)

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (–≤–∫–ª–∞–¥–∫–∞ "SSL")

- **SSL Certificate:** –í—ã–±–µ—Ä–∏—Ç–µ **"Request a new SSL Certificate with Let's Encrypt"**
- ‚úÖ **Force SSL:** –≤–∫–ª—é—á–∏—Ç–µ
- ‚úÖ **HTTP/2 Support:** –≤–∫–ª—é—á–∏—Ç–µ  
- ‚úÖ **HSTS Enabled:** –≤–∫–ª—é—á–∏—Ç–µ
- **Email Address for Let's Encrypt:** –≤–∞—à email (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

–ù–∞–∂–º–∏—Ç–µ **"Save"**

### 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–í–æ –≤–∫–ª–∞–¥–∫–µ **"Advanced"** –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

```nginx
proxy_set_header Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto $scheme;
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection "upgrade";
```

–ù–æ –æ–±—ã—á–Ω–æ NPM –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DNS –∑–∞–ø–∏—Å—å –¥–ª—è –¥–æ–º–µ–Ω–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ IP: `95.165.75.43`

–ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–π—Ç–µ A-–∑–∞–ø–∏—Å—å –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–º:
- **–¢–∏–ø:** A
- **–ò–º—è:** site (–∏–ª–∏ @ –¥–ª—è –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞)
- **–ó–Ω–∞—á–µ–Ω–∏–µ:** 95.165.75.43
- **TTL:** 3600

### 7. –ì–æ—Ç–æ–≤–æ!

–ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã, –∑–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ:
```
https://site.endless-summer.ru
```

---

## üîç –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```bash
   curl http://localhost:3000
   pm2 status
   pm2 logs apart-site
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS:**
   ```bash
   nslookup site.endless-summer.ru
   # –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å 95.165.75.43
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ NPM:**
   - –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ NPM: **"Audit Log"** –∏–ª–∏ **"Logs"**

4. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 3000 –æ—Ç–∫—Ä—ã—Ç:**
   ```bash
   sudo ufw allow 3000/tcp
   netstat -tulpn | grep 3000
   ```

