✅ ЧЕКЛИСТ: ВВОД В ЭКСПЛУАТАЦИЮ 3D ВИЗУАЛИЗАЦИИ

═══════════════════════════════════════════════════════════════════

📋 ПЕРЕД ЗАПУСКОМ

□ Убедиться, что все файлы созданы:
  □ src/components/scene/SpainBuilding3D.tsx
  □ src/app/spain-building/page.tsx
  □ src/app/spain-building/client.tsx
  □ src/app/spain-building/layout.tsx
  □ Все файлы документации

□ Проверить зависимости:
  □ React 19.2.0+
  □ Next.js 16.0.1+
  □ mapbox-gl 3.5.1+
  □ framer-motion 12.23.24+
  □ TypeScript 5+

═══════════════════════════════════════════════════════════════════

🔧 НАСТРОЙКА ОКРУЖЕНИЯ

□ Регистрация Mapbox:
  □ Перейти на https://www.mapbox.com/
  □ Создать аккаунт (бесплатно)
  □ Подтвердить почту
  □ Скопировать Public Token

□ Создать .env.local:
  □ Файл находится в корне проекта
  □ NEXT_PUBLIC_MAPBOX_TOKEN=pk.eyJ... (скопировать)
  □ NEXT_PUBLIC_BUILDING_LAT=36.7696 (опционально)
  □ NEXT_PUBLIC_BUILDING_LNG=-4.0387 (опционально)

□ Проверить файловую систему:
  □ .env.local существует
  □ Права доступа корректны
  □ Файл не в .gitignore (ВАЖНО!)

═══════════════════════════════════════════════════════════════════

🚀 ПЕРВЫЙ ЗАПУСК

□ Остановить текущий dev сервер (если работал)
  Ctrl+C

□ Очистить кеш (опционально):
  rm -r .next
  rm -r node_modules/.cache

□ Установить зависимости:
  npm install

□ Запустить dev сервер:
  npm run dev

□ Ждать сообщения:
  "✓ Ready in X.XXXs"

□ Не закрывать терминал!

═══════════════════════════════════════════════════════════════════

🌐 ПРОВЕРКА В БРАУЗЕРЕ

□ Открыть http://localhost:3000/spain-building

□ Должны увидеть:
  □ Карта загружается (может быть белый экран 2-3 сек)
  □ Карта центрирована на Алгарробо, Испания
  □ Видно голубое/серое здание в центре
  □ Вокруг видны другие здания (OSM)
  □ Слева сверху кнопка "🔄 Вращение"
  □ Слева сверху информационная панель

□ Проверить вращение:
  □ Карта медленно крутится на 360°
  □ Кнопка вращения меняет текст на "⏸ Остановить"

□ Проверить интерактивность:
  □ Наведите мышь на здание
  □ Должно выделиться какой-то сегмент
  □ Появится всплывающая подсказка
  □ Клик на здание → откроется информационная панель

□ Проверить управление:
  □ Перетаскивание мышью → поворот камеры
  □ Скролл → зум
  □ Правый клик + движение → наклон

═══════════════════════════════════════════════════════════════════

⚠️ ДИАГНОСТИКА ОШИБОК

□ Если "Cannot find module 'react'":
  → Перезагрузить сервер (Ctrl+C, npm run dev)

□ Если "Token is not valid":
  → Проверить .env.local на опечатки
  → Переcopировать токен с Mapbox
  → Перезагрузить сервер

□ Если белый экран:
  → F12 → Console → проверить ошибки
  → Убедиться, что интернет подключен
  → Очистить браузер кеш (Ctrl+Shift+Delete)
  → Обновить страницу (F5)

□ Если карта показывает другое место:
  □ Проверить координаты в .env.local
  □ Перезагрузить сервер после изменения

□ Если квартиры не видны:
  □ Нажать Ctrl+Shift+I (Console)
  □ Проверить ошибки
  □ Зум на карте до нужного размера

═══════════════════════════════════════════════════════════════════

📊 ТЕСТИРОВАНИЕ ФУНКЦИОНАЛЬНОСТИ

Вращение:
□ Автоматическое включено при загрузке
□ Кнопка "🔄" отключает вращение
□ Кнопка меняет текст на "⏸ Остановить"
□ Нажав еще раз, вращение возобновляется

Интерактивность:
□ Наведение → выделение жёлтым
□ Клик → открытие информационной панели
□ Панель показывает: ID, площадь, комнаты, статус
□ Кнопка закрытия в панели работает

Фильтры:
□ Кнопки "1к", "2к", "3к" переключаются
□ Чекбокс "Только свободные" работает
□ При клике выборочно показываются/скрываются квартиры

Управление камерой:
□ Перетаскивание мышью вращает камеру
□ Скролл приближает/удаляет
□ Правый клик + движение наклоняет вид

═══════════════════════════════════════════════════════════════════

📱 ТЕСТИРОВАНИЕ НА МОБИЛЬНЫХ

□ Открыть на смартфоне http://[ваш_ip]:3000/spain-building

□ Проверить:
  □ Карта загружается
  □ Вращение работает
  □ Сенсорные жесты работают (двумя пальцами зум)
  □ Наведение → выделение
  □ Клик → информационная панель
  □ Интерфейс не слишком мал
  □ Нет ошибок консоли

□ Альтернатива (в браузере):
  □ F12 → Device Toolbar (Ctrl+Shift+M)
  □ Выбрать iPhone/Android
  □ Проверить все выше

═══════════════════════════════════════════════════════════════════

🎨 КАСТОМИЗАЦИЯ (ОПЦИОНАЛЬНО)

□ Изменить координаты (другой город):
  → Обновить NEXT_PUBLIC_BUILDING_LAT/LNG в .env.local

□ Изменить данные квартир:
  → Отредактировать функцию generateApartmentData()
  → Или подключить API

□ Изменить цвета:
  → В компоненте найти getUnitColor()
  → Заменить HEX коды

□ Изменить количество этажей/квартир:
  → Найти константы FLOORS, UNITS_PER_FLOOR
  → Изменить значения

═══════════════════════════════════════════════════════════════════

📈 ОПТИМИЗАЦИЯ (ОПЦИОНАЛЬНО)

□ Если медленно на старых браузерах:
  □ Уменьшить качество Mapbox (style)
  □ Отключить некоторые слои
  □ Порекомендовать обновить браузер

□ Если большой размер бандла:
  □ Использовать динамический импорт
  □ Подключить код-сплиттинг

□ Если много времени загружается:
  □ Кешировать Mapbox слои
  □ Использовать Service Worker

═══════════════════════════════════════════════════════════════════

🔐 БЕЗОПАСНОСТЬ

□ Токен Mapbox:
  □ Находится только в .env.local (не в коде)
  □ Не коммитится в Git (.gitignore)
  □ Ограничивает домены в Mapbox панели

□ Перед продакшеном:
  □ Ограничить токен конкретными доменами
  □ Убедиться, что .env.local в .gitignore
  □ Настроить CORS если нужно

═══════════════════════════════════════════════════════════════════

📚 ДОКУМЕНТАЦИЯ

Если что-то не ясно, обратитесь к:

□ START_HERE.md - Быстрая справка
□ docs/QUICKSTART_3D.md - 5 минут до старта
□ docs/MAPBOX_3D_SETUP.md - Полная документация
□ IMPLEMENTATION_SUMMARY.md - Описание всего

═══════════════════════════════════════════════════════════════════

🎉 ГОТОВО!

Если все чекбоксы отмечены ✅, то система готова к использованию.

Поздравляем! 🎊

═══════════════════════════════════════════════════════════════════

💾 ПОСЛЕДУЮЩЕЕ ОБСЛУЖИВАНИЕ

Периодически проверять:
□ Работает ли Mapbox API
□ Консоль браузера на ошибки
□ Производительность на разных браузерах
□ Мобильная совместимость

═══════════════════════════════════════════════════════════════════
